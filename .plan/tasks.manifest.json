{
  "workflow": "READ→VERIFY",
  "sequence": [
    {
      "id": "D.1",
      "title": "GET /api/project_info.json",
      "area": "bridge, plugin",
      "depends_on": [],
      "status": "done",
      "dod": [
        "Fields: program_name, language_id, compiler_spec, image_base, entry_point, memory_blocks[name,start,end,loaded,initialized,rwx], imports_count, exports_count",
        "Deterministic sorting of memory_blocks by start",
        "Unit + Contract + Golden tests",
        "OpenAPI + docs updated"
      ]
    },
    {
      "id": "D.2",
      "title": "POST /api/analyze_function_complete.json",
      "area": "analyzer",
      "depends_on": [
        "D.1"
      ],
      "dod": [
        "Aggregates disasm(±N), strings(xN), xrefs in/out, callers/callees(r1), feature sketch",
        "`fields`, `fmt`, `max_result_tokens` supported",
        "Deterministic ordering, server timeout enforced",
        "Unit + Contract + Golden; docs"
      ],
      "status": "done"
    },
    {
      "id": "D.3",
      "title": "Search metadata unify",
      "area": "bridge",
      "depends_on": [],
      "dod": [
        "All search endpoints return {query,total,page,limit,has_more,items}",
        "page is 1-based; has_more rule enforced",
        "Edge-case tests (0/limit/last), Golden samples"
      ],
      "status": "done"
    },
    {
      "id": "D.4",
      "title": "POST /api/collect.json",
      "area": "bridge",
      "depends_on": [
        "D.1",
        "D.3"
      ],
      "dod": [
        "`queries[]` executes multiple read-only sub-ops in one call",
        "Budget-aware shortening; per-subop envelope",
        "Unit + Contract + Golden; docs"
      ],
      "status": "done"
    },
    {
      "id": "D.5",
      "title": "Unified error schema + enums",
      "area": "platform",
      "depends_on": [],
      "dod": [
        "errors[] entries = {status, code, message, recovery[]}",
        "Enum implemented + documented",
        "Golden examples for each code"
      ],
      "status": "done"
    },
    {
      "id": "D.6",
      "title": "Server-side result budgeting",
      "area": "platform",
      "depends_on": [
        "D.2",
        "D.4"
      ],
      "dod": [
        "`max_result_tokens` param; `result_budget.mode=auto_trim|strict`",
        "Response carries estimate_tokens, truncated, resume_cursor?",
        "Contract tests for strict (413) and auto_trim (200, truncated=true)"
      ],
      "status": "done"
    },
    {
      "id": "D.7",
      "title": "rank=simple & k (heuristic prefilter, opt-in)",
      "area": "analyzer",
      "depends_on": [
        "D.3"
      ],
      "dod": [
        "Heuristics applied before pagination; stable ordering",
        "Opt-in only; docs + tests"
      ],
      "status": "done"
    },
    {
      "id": "D.8",
      "title": "Cursor streaming for large sets",
      "area": "bridge",
      "depends_on": [
        "D.3"
      ],
      "dod": [
        "Cursor-based paging + early partial responses",
        "Resume handles documented; tests"
      ],
      "status": "done"
    },
    {
      "id": "D.9",
      "title": "5-min short cache per {digest,query}",
      "area": "platform",
      "depends_on": [],
      "dod": [
        "Cache layer with TTL=300s",
        "Cache key schema documented; hit/miss metrics"
      ],
      "status": "done"
    },
    {
      "id": "R.1",
      "title": "Batch project analysis lanes",
      "area": "bridge",
      "depends_on": [
        "D.2",
        "D.4"
      ],
      "dod": [
        "Collector accepts multi-program project batches with deterministic envelopes",
        "Contract coverage + docs outlining batch workflows"
      ],
      "status": "done"
    },
    {
      "id": "R.2",
      "title": "Enhanced search ranking/context windows",
      "area": "analyzer",
      "depends_on": [
        "D.7"
      ],
      "dod": [
        "Ranking heuristics expose adjustable context windows",
        "Golden samples prove deterministic ordering at new limits"
      ],
      "status": "done"
    },
    {
      "id": "R.3",
      "title": "`include_literals` plumbing",
      "area": "bridge",
      "depends_on": [
        "D.2"
      ],
      "dod": [
        "Read/search endpoints accept include_literals flag",
        "Docs cover defaults + impact on result budgets"
      ],
      "status": "done"
    },
    {
      "id": "R.4",
      "title": "Expanded audit logging",
      "area": "platform",
      "depends_on": [
        "D.6"
      ],
      "dod": [
        "Write/rebase/datatypes flows emit structured JSONL traces",
        "CI enforces audit log schema coverage"
      ],
      "status": "done"
    },
    {
      "id": "R.5",
      "title": "CORS/origin whitelist",
      "area": "platform",
      "depends_on": [],
      "dod": [
        "Configurable origin whitelist enforced for bridge endpoints",
        "Docs cover deployment toggles + failure modes"
      ],
      "status": "todo"
    },
    {
      "id": "R.6",
      "title": "Docker/CI packaging",
      "area": "build",
      "depends_on": [],
      "dod": [
        "Deterministic Docker image published for CI/local runs",
        "CI pipeline exercises container smoke tests"
      ],
      "status": "todo"
    },
    {
      "id": "R.7",
      "title": "MCP tool UX docs",
      "area": "docs",
      "depends_on": [
        "T-202511-018"
      ],
      "dod": [
        "End-to-end MCP tool walkthrough with screenshots",
        "Failure drill + troubleshooting appendix"
      ],
      "status": "todo"
    },
    {
      "id": "HK-OPENAPI-RENDERER",
      "title": "Fix OpenAPI renderer combinators",
      "area": "docs",
      "depends_on": [],
      "dod": [
        "example_from_schema handles list types",
        "oneOf/anyOf/allOf emit examples"
      ],
      "status": "done"
    },
    {
      "id": "HK-GHIDRA-DEPS",
      "title": "Resolve Ghidra dependencies via GHIDRA_DIR",
      "area": "build",
      "depends_on": [],
      "dod": [
        "POM references GHIDRA_DIR",
        "CI downloads ghidra and sets GHIDRA_DIR"
      ],
      "status": "done"
    },
    {
      "id": "T-202511-018",
      "title": "Sync roadmap + plan docs with audit",
      "area": "planning",
      "depends_on": [],
      "dod": [
        "docs/ROADMAP.md reflects delivered vs. pending features",
        ".plan/state.json and tasks.manifest.json statuses match implementation",
        "Overview or status doc summarizes current bridge capabilities and open roadmap gaps"
      ],
      "status": "done"
    },
    {
      "id": "R.8",
      "title": "Program selection helpers",
      "area": "bridge",
      "depends_on": [
        "D.1"
      ],
        "dod": [
          "MCP tools expose select_program/domain_file_id and get_current_program",
          "Analysis endpoints consume the active program context",
          "Docs clarify switching rules and validation"
        ],
        "status": "done",
        "commit": "pending"
      },
    {
      "id": "R.9",
      "title": "Firmware-set workflows",
      "area": "docs",
      "depends_on": [
        "R.8"
      ],
      "dod": [
        "Standard prompts for boot→app→res analyses",
        "Guidance for swapping programs mid-investigation",
        "Example walkthrough against sample firmware"
      ],
      "status": "todo"
    },
    {
      "id": "R.10",
      "title": "Clarify strings_compact and xref errors",
      "area": "bridge",
      "depends_on": [],
      "dod": [
        "strings_compact population rules documented or fixed",
        "search_xrefs_to error messages cover empty query requirements",
        "Contract tests for expected envelopes"
      ],
      "status": "done"
    },
    {
      "id": "R.11",
      "title": "LLM recipes on existing tools",
      "area": "docs",
      "depends_on": [
        "D.2",
        "D.4"
      ],
      "dod": [
        "Document string→xrefs→disasm, scalar→MMIO→annotate, and region→functions→analyze workflows",
        "Token budgeting notes for recipes",
        "Optional MCP meta-tool backlog captured"
      ],
      "status": "todo"
    },
    {
      "id": "R.12",
      "title": "Write-path utilities",
      "area": "bridge",
      "depends_on": [
        "D.6"
      ],
      "dod": [
        "rename_function/set_comment/apply_label tools gated by GHIDRA_MCP_ENABLE_WRITES",
        "Dry-run mode and structured error codes",
        "Docs warn about write scope and confirmation requirements"
      ],
      "status": "todo"
    },
    {
      "id": "R.13",
      "title": "Extension ZIP packaging",
      "area": "build",
      "depends_on": [],
      "dod": [
        "Deterministic Extension ZIP emitted alongside GhidraMCP.jar",
        "extension.properties and layout validated",
        "Script/CI path builds ZIP and runs minimal smoke test"
      ],
      "status": "todo"
    },
    {
      "id": "R.14",
      "title": "Ghidra version compatibility",
      "area": "tests",
      "depends_on": [],
      "dod": [
        "Test matrix covering min supported and latest Ghidra",
        "Mock-based unit test guarding API/namespace compatibility",
        "Docs list supported versions and failure handling"
      ],
      "status": "todo"
    },
    {
      "id": "R.15",
      "title": "MCP tool smoke tests",
      "area": "tests",
      "depends_on": [
        "D.1",
        "D.4"
      ],
      "dod": [
        "Script exercises project_info/overview, search_strings/functions, scalars, mmio_annotate_compact, read_bytes/words",
        "Assertions for known-good fixtures",
        "CI ready entrypoint"
      ],
      "status": "done"
    },
    {
      "id": "R.16",
      "title": "Unit tests for new tools",
      "area": "tests",
      "depends_on": [
        "D.1"
      ],
      "dod": [
        "Unit coverage for new project/analysis tools beyond project_overview",
        "Negative cases for bad parameters and large limits",
        "Schema validation enforced"
      ],
      "status": "done"
    },
    {
      "id": "R.17",
      "title": "AGENTS guidance",
      "area": "docs",
      "depends_on": [],
      "dod": [
        "AGENTS.md describes recommended tool sequencing",
        "Examples emphasize project_info/project_overview and IO/string flows",
        "Notes on future select_program usage"
      ],
      "status": "todo"
    },
    {
      "id": "R.18",
      "title": "Cookbook snippets",
      "area": "docs",
      "depends_on": [
        "R.11"
      ],
      "dod": [
        "Markdown snippets for USB handlers, update/flash, bootloader traces, MMIO surveys",
        "Prompts rely solely on ghidra-bridge tools",
        "Token/limit guidance included"
      ],
      "status": "todo"
    },
    {
      "id": "R.19",
      "title": "Cross-binary analysis",
      "area": "research",
      "depends_on": [
        "R.8"
      ],
      "dod": [
        "Plan for APP↔BOOT cross-references and firmware diffing",
        "Prototype comparison flow or recipe documented",
        "Risk/guardrails captured"
      ],
      "status": "todo"
    },
    {
      "id": "R.20",
      "title": "Controlled Ghidra automation",
      "area": "research",
      "depends_on": [],
      "dod": [
        "Design gated hooks for actions like auto-analysis and mark-as-library",
        "Dry-run or confirmation steps documented",
        "Safety constraints aligned with GHIDRA_MCP_ENABLE_WRITES"
      ],
      "status": "todo"
    },
    {
      "id": "R.22",
      "title": "Data type lookup cache",
      "area": "plugin",
      "depends_on": [],
      "dod": [
        "Per-DataTypeManager cache mapping normalized type names to DataType instances",
        "Cache invalidated on manager switch or reload; fast lookup before full scans",
        "Safe fallback scan populates cache when needed; behavior matches existing resolution"
      ],
      "status": "todo"
    },
    {
      "id": "R.23",
      "title": "open_program readiness gating",
      "area": "bridge, plugin",
      "depends_on": [
        "R.21"
      ],
      "dod": [
        "Program load state tracked (IDLE/LOADING/READY) with auto-analysis awareness",
        "Status endpoint exposes readiness without blocking heavy calls",
        "Bridge waits/polls after open/select before analysis tools, surfacing wait guidance"
      ],
      "status": "todo"
    },
    {
      "id": "R.24",
      "title": "Port 8080 error response cleanup",
      "area": "plugin, bridge",
      "depends_on": [],
      "dod": [
        "Consistent 8080 error convention (text vs JSON) documented and implemented",
        "readBytes/readBytesBase64 return clear success payloads and error markers",
        "Python client maps 8080 errors deterministically without misinterpreting payloads; tests cover success/failure"
      ],
      "status": "todo"
    },
    {
      "id": "R.21",
      "title": "Single-port multi-context server",
      "area": "plugin",
      "depends_on": [
        "R.8"
      ],
      "dod": [
        "Java plugin uses static/singleton HttpServer to share port 8080 across FrontEnd and CodeBrowser",
        "FrontEnd loads plugin without blocking subsequent CodeBrowser instances",
        "Requests delegate to active CodeBrowser or FrontEnd as appropriate",
        "`/api/open_program` (or equivalent) allows switching tools/files via API"
      ],
      "status": "done"
    },
    {
      "id": "T-202511-019",
      "title": "Refresh roadmap and plan backlog",
      "area": "planning",
      "depends_on": [],
      "dod": [
        "docs/ROADMAP.md reflects navigation/tooling backlog",
        ".plan TODO/DONE updated with new task IDs and statuses",
        "tasks.manifest.json and state.json synchronized"
      ],
      "status": "done"
    }
  ]
}
