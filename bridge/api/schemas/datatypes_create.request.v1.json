{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "urn:schema:datatypes-create.request.v1",
  "type": "object",
  "additionalProperties": false,
  "$defs": {
    "field": {
      "type": "object",
      "additionalProperties": false,
      "required": ["name", "type"],
      "properties": {
        "name": {"type": "string", "minLength": 1},
        "type": {"type": "string", "minLength": 1},
        "length": {"type": "integer", "minimum": 1},
        "offset": {"type": "integer", "minimum": 0}
      }
    }
  },
  "required": ["kind", "name", "category", "fields"],
  "properties": {
    "kind": {"type": "string", "enum": ["structure", "union"]},
    "name": {"type": "string", "minLength": 1},
    "category": {"type": "string", "minLength": 1},
    "fields": {
      "type": "array",
      "minItems": 1,
      "items": {"$ref": "#/$defs/field"}
    },
    "dry_run": {"type": "boolean", "default": true}
  }
}
